# **LeetCode 125\. Valid Palindrome 題目詳解與解法統整**

## **1\. 題目描述 (Problem Description)**

在 LeetCode 第 125 題中，題目定義一個字串是否為 **「回文」(Palindrome)」** 的標準如下：

1. **忽略大小寫**：所有的字母都要視為相同（不論大寫或小寫）。  
2. **僅考慮字母與數字**：必須移除所有非字母數字 (non-alphanumeric) 的字元，如空格、逗號、冒號、標點符號等。  
3. **正讀反讀一致**：處理後的字串，從頭讀到尾與從尾讀到頭必須完全相同。

**範例 1：**

* 輸入：s \= "A man, a plan, a canal: Panama"  
* 處理後："amanaplanacanalpanama"  
* 結果：true

**範例 2：**

* 輸入：s \= "race a car"  
* 處理後："raceacar"  
* 結果：false (反讀為 racaecar)

## **2\. 測驗目的與重點**

這道題目的核心在於考驗開發者對以下基礎能力的掌握：

* **字串處理能力**：如何有效地過濾字串中的雜訊並處理大小寫轉換。  
  * **排除標點符號的技巧**：在程式實作中，我們通常使用內建函式如 Python 的 isalnum() 來判斷字元是否為字母或數字。如果是使用正規表示法 (Regular Expression)，則可以用 \[^a-zA-Z0-9\] 來匹配並替換掉所有非字母數字的字元。  
  * **轉換一致性**：確保在比較前統一轉換為小寫 (lower()) 或大寫 (upper())，以避免 ASCII 編碼不同導致的誤判。  
* **雙指針技巧 (Two Pointers)**：如何在不使用額外空間（或極少空間）的情況下，進行兩端對比。  
* **空間與時間複雜度的權衡**：是先產生新字串再比對（較直觀但耗空間），還是原地比對（較省空間）。

## **3\. 思路邏輯與分析**

當我們從題目描述切入時，可以得出以下兩個主要思路：

### **思路 A：預處理後反轉 (Build & Reverse)**

最直觀的方法是根據題目要求，先「整理」字串。

1. 遍歷字串，將屬於字母或數字的字元挑出來。  
2. 將這些字元轉換成小寫。  
3. 將整理後的字串與其反轉後的版本 (Reversed string) 進行比較。若相等即為回文。

### **思路 B：雙指針原地比對 (Two Pointers \- In-place)**

為了優化空間效率，我們可以直接在原字串上比對。

1. 設定兩個指標：left 指向頭部，right 指向尾部。  
2. 當 left 遇到的字元不是字母或數字時，向右移動一位跳過它。  
3. 當 right 遇到的字元不是字母或數字時，向左移動一位跳過它。  
4. 當兩個指標都指向有效字元時，比對它們（轉成小寫）。若不同則直接回傳 false。  
5. 重複直到 left \>= right。

## **4\. 複雜度分析**

| 解法 | 時間複雜度 | 空間複雜度 | 說明 |
| :---- | :---- | :---- | :---- |
| **雙指針** | $O(n)$ | $O(1)$ | 僅掃描一次，無須額外存儲，最高效。 |
| **預處理反轉** | $O(n)$ | $O(n)$ | 需要存儲過濾後的字串與反轉版本。 |

*註：*$n$ *為輸入字串的長度。*
